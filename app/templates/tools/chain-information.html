{% extends "base/base.html" %}
{% block content %}
{% include 'base/search_bar_non_home_inclusion.html' %}
{% if error %}
<p>An error occured: <b>{{error.errorMessage}}</b></p>
{% else %}

<!-- Get Transactions -->
<script>
  function getTransactions(requested_page, total_rows) {
    transactions = document.getElementById('transactions');
    url = '/ajax_protocol_updates/{{net}}/' + requested_page + '/' + total_rows + '/' + api_key;
    transactions.innerHTML = '{% include "base/spinner.html" %}'
     fetch(url)
      .then((response) => {
        return response.text();
      })
      .then((data) => {
        transactions.innerHTML = data;
        
      })
      .catch(function (error) {
        console.log(error);
      });
  }

  function prev_v2_txs(requested_page, total_rows) {
    getTransactions(requested_page, total_rows)
  };
  function next_v2_txs(requested_page, total_rows) {
    getTransactions(requested_page, total_rows)
  };
  window.addEventListener('load', (event) => {
    getTransactions(0, 0)
    
  });
</script>

<h4>Chain Information</h4>
<br/>
<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        
    <li class="nav-item" role="presentation">
      <button class="nav-link active explorer bg-secondary-subtle" id="pills-ip-tab" data-bs-toggle="pill" data-bs-target="#pills-ip" type="button" role="tab" aria-controls="pills-ip" aria-selected="true">
        <span class="tab-text-large">Identity Providers</span><span class="tab-text-small">ID Providers</span>
    </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link  explorer bg-secondary-subtle" id="pills-ar-tab" data-bs-toggle="pill" data-bs-target="#pills-ar" type="button" role="tab" aria-controls="pills-ar" aria-selected="true">
          <span class="tab-text-large">Anonymity Revokers</span><span class="tab-text-small">Anonymity Revokers</span>
      </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link  explorer bg-secondary-subtle" id="pills-chain-tab" data-bs-toggle="pill" data-bs-target="#pills-chain" type="button" role="tab" aria-controls="pills-chain" aria-selected="true">
          <span class="tab-text-large">Protocol Updates</span><span class="tab-text-small">Protocol Updates</span>
      </button>
      </li>
</ul>

<div class="tab-content" id="pills-tabContent">
  
    <div class="tab-pane fade show active" id="pills-ip" role="tabpanel" aria-labelledby="pills-ip-tab" tabindex="0">
      <div class="row mt-4">
        <div class=" col-md-12  col-sm-12">
          <div class="border curved-border" >
            {% for provider in ip %}
                {% include "/tools/ip-ar.html" %}
                {%endfor %}
          </div>
        </div>  
        
      </div>
    </div>
    <div class="tab-pane fade show " id="pills-ar" role="tabpanel" aria-labelledby="pills-ar-tab" tabindex="0">
        <div class="row mt-4">
          <div class=" col-md-12  col-sm-12">
            <div class="border curved-border" >
              {% for provider in ar %}
                  {% include "/tools/ip-ar.html" %}
                  {%endfor %}
            </div>
          </div>  
          
        </div>
      </div>
      <div class="tab-pane fade show " id="pills-chain" role="tabpanel" aria-labelledby="pills-chain-tab" tabindex="0">
        <div class="row mt-4">
          <div class=" col-md-12  col-sm-12">
            <div class="border curved-border">
                <div
                    hx-trigger="intersect, switched-theme from:body" 
                    hx-get="/{{net}}/protocol-update-txs"
                    
                    ></div>
              
            </div>
          </div>  
          
        </div>
      </div>

</div>

{% endif %}
{% endblock content %}