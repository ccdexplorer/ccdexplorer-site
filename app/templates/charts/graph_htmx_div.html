<div    
    class=""
    hx-ext='json-enc'
    hx-encoding="json"
    hx-trigger="update_event from:#update, load, switched-theme from:body" 
    hx-post="{{hx_post_url}}"
    hx-vals='js:{
        theme: document.querySelector("HTML").getAttribute("data-bs-theme"),
        start_date: document.getElementById("event-start-pretty").innerText,
        end_date: document.getElementById("event-end-pretty").innerText,
        filename: "{{filename}}",
        group_by_selection: document.querySelector("input[name=\"group_by\"]:checked").id,
        {%if include_trace_selection %}trace_selection: [...document.querySelectorAll("input[name=\"trace_selection\"]:checked")].map(el => el.id).join(","),{% endif %}
        {%if include_dropdown %}dropdown_values: [...(document.getElementById("tx_types")?.selectedOptions || [])].map(opt => opt.value),{% endif %}
        {%if include_dropdown_fancy %}dropdown_values_fancy:document.querySelector("input[name=\"fancy_group\"]:checked").id,{% endif %}
        {% if include_kpis %}kpi: document.getElementById("kpi_id")?.value{% endif %}
        }'
></div>
